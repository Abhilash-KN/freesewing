{"version":3,"file":"index.js","sources":["../src/withStorage/index.js"],"sourcesContent":["import React from \"react\";\r\nimport storage from \"@freesewing/utils/storage\";\r\n\r\nconst withStorage = (WrappedComponent, name) => {\r\n  return class extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.setStorageData = this.setStorageData.bind(this);\r\n      this.updateStorageData = this.updateStorageData.bind(this);\r\n      this.state = { data: storage.get(name) || {} };\r\n    }\r\n\r\n    setStorageData(data) {\r\n      storage.set(name, data);\r\n    }\r\n\r\n    updateStorageData(value, l1 = false, l2 = false, l3 = false) {\r\n      if (!l1) return;\r\n      let data = this.state.data;\r\n\r\n      if (l2 && typeof data[l1] === \"undefined\") data[l1] = {};\r\n      if (l3 && typeof data[l1][l2] === \"undefined\") data[l1][l2] = {};\r\n\r\n      if (l3) data[l1][l2][l3] = value;\r\n      else if (l2) data[l1][l2] = value;\r\n      else data[l1] = value;\r\n      this.setState({ data });\r\n      storage.set(name, data);\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <WrappedComponent\r\n          storageData={this.state.data}\r\n          updateStorageData={this.updateStorageData}\r\n          {...this.props}\r\n        />\r\n      );\r\n    }\r\n  };\r\n};\r\n\r\nexport default withStorage;\r\n"],"names":["withStorage","WrappedComponent","name","props","setStorageData","_this","bind","updateStorageData","state","data","storage","get","set","value","l1","l2","l3","setState","React","storageData","Component"],"mappings":";;;;;unEAGA,GAAMA,CAAAA,WAAW,CAAG,SAACC,CAAD,CAAmBC,CAAnB,CAA4B,+BAEhCC,EAAO,oDACXA,KACDC,eAAiBC,EAAKD,cAAL,CAAoBE,IAApB,0BAAA,IACjBC,kBAAoBF,EAAKE,iBAAL,CAAuBD,IAAvB,0BAAA,IACpBE,MAAQ,CAAEC,IAAI,CAAEC,OAAO,CAACC,GAARD,CAAYR,CAAZQ,GAAqB,EAA7B,qGAGAD,EAAM,CACnBC,OAAO,CAACE,GAARF,CAAYR,CAAZQ,CAAkBD,CAAlBC,4CAGgBG,EAA2C,IAApCC,CAAAA,CAAoC,6CAAA,eAAA,CAAxBC,CAAwB,6CAAA,eAAA,CAAZC,CAAY,6CAAA,eAAA,IACtDF,MACDL,CAAAA,CAAI,CAAG,KAAKD,KAAL,CAAWC,KAElBM,CAAE,EAAwB,WAApB,QAAON,CAAAA,CAAI,CAACK,CAAD,IAAsBL,CAAI,CAACK,CAAD,CAAJL,CAAW,IAClDO,CAAE,EAA4B,WAAxB,QAAOP,CAAAA,CAAI,CAACK,CAAD,CAAJL,CAASM,CAATN,IAA8BA,CAAI,CAACK,CAAD,CAAJL,CAASM,CAATN,EAAe,IAE1DO,EAAIP,CAAI,CAACK,CAAD,CAAJL,CAASM,CAATN,EAAaO,CAAbP,EAAmBI,EAClBE,EAAIN,CAAI,CAACK,CAAD,CAAJL,CAASM,CAATN,EAAeI,EACvBJ,CAAI,CAACK,CAAD,CAAJL,CAAWI,OACXI,SAAS,CAAER,IAAI,CAAJA,CAAF,GACdC,OAAO,CAACE,GAARF,CAAYR,CAAZQ,CAAkBD,CAAlBC,mCAGO,OAELQ,CAAAA,mBAAA,CAACjB,CAAD,WACEkB,WAAW,CAAE,KAAKX,KAAL,CAAWC,KACxBF,iBAAiB,CAAE,KAAKA,mBACpB,KAAKJ,MAHX,SA5Bee,KAAK,CAACE,UAD7B,CAAA"}